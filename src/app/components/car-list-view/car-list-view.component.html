<ng-container *ngIf="initialized && cars$ | async as cars; else loading">
  <ng-container *ngIf="isAuthorized$ | async; else userNotFound">
    <h1>{{ 'Car.Title' | translate: { name: userName$ | async } }}</h1>

    <p>{{ 'Car.Description' | translate }}</p>

    <ul class="list-unstyled cars" *ngIf="cars.length > 0; else noItems">
      <li *ngFor="let car of cars; trackBy: trackById">
        <a [routerLink]="['./' + car.id]">
          <div>
            <div>{{ car.name }}</div>
            <div class="statistics">
              <span
                ><strong>{{ 'Car.TotalKm' | translate }}:</strong> {{ getTotalKm(car) | number: '1.0-0' }}</span
              >
              <span
                ><strong [innerHTML]="('Car.AverageConsumation' | translate) + ':'"></strong>
                {{ getAverageConsumation(car) | number: '1.2-2' }}</span
              >
            </div>
          </div>
          <clr-icon shape="caret right"></clr-icon>
        </a>
      </li>
    </ul>

    <ng-template #noItems
      ><p class="no-items">
        <i>{{ 'Car.NoItemsFound' | translate }}</i>
      </p></ng-template
    >

    <button class="btn btn-primary btn-block" (click)="createCar()">{{ 'Car.NewCar' | translate }}</button>
    <myf-car-dialog></myf-car-dialog>
  </ng-container>
</ng-container>

<ng-template #loading><myf-loading></myf-loading></ng-template>
<ng-template #userNotFound
  ><myf-error-message>{{ 'App.UserNotFound' | translate }}</myf-error-message></ng-template
>
